<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRUD App</title>

  <link rel="stylesheet" href="https://esm.sh/@picocss/pico@2.1.1/css/pico.min.css"
    integrity="sha384-L1dWfspMTHU/ApYnFiMz2QID/PlP1xCW9visvBdbEkOLkSSWsP6ZJWhPw6apiXxU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://esm.sh/remixicon@4.7.0/fonts/remixicon.css"
    integrity="sha384-gSJzCOtDZjCJLnLHBld7v4xJStn/Zm1tlIRbF7KfFAnCCqT4wrc6CpihUEUbG/ab" crossorigin="anonymous">

  <script type="importmap">
  {
    "imports": {
      "alpinejs": "https://esm.sh/alpinejs@3.15.2",
      "arquero": "https://esm.sh/arquero@8.0.3",
      "main": "./main.js"
    },
    "integrity": {
      "https://esm.sh/alpinejs@3.15.2": "sha384-L3PQcIh1GsiWGcQyVSElfGxZMs83MlB23sNsHjSsoY/THbrHuHpBhEg/ouCYgFS6",
      "https://esm.sh/arquero@8.0.3": "sha384-MVeuHosyg1JgEOTCPNgLSlaSkuJhRPGue/WUwflCQSdHbhu0SO0h+pvIw0EmyWzg"
    }
  }
  </script>

  <script type="module">
    import {app} from 'main';
    window.app = app;
    app.start();
  </script>
</head>

<body x-data="crud()">
  <header>
    <nav>
      <ul>
        <li><strong>CRUD App</strong></li>
      </ul>
      <ul>
        <li><a @click="view = 'settings'"><i class="ri-settings-3-line"></i> Settings</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div class="container">
      <aside>
        <nav>
          <ul>
            <li><a @click="view = 'list'"><i class="ri-table-2"></i> Items</a></li>
            <li><a @click="view = 'create'"><i class="ri-add-line"></i> Create</a></li>
          </ul>
        </nav>
      </aside>

      <template x-if="view === 'list'">
        <article>
          <h2>Items</h2>
          <div x-html="tableHTML"></div>
        </article>
      </template>

      <template x-if="view === 'create'">
        <article>
          <h2>Create Item</h2>
          <form @submit.prevent="saveItem">
            <input type="text" x-model="form.name" placeholder="Name" required>
            <button type="submit">Create</button>
          </form>
        </article>
      </template>

      <template x-if="view === 'settings'">
        <article>
          <h2>Settings</h2>
          <p>Total items: <strong x-text="dt.numRows()"></strong></p>
          <div class="grid">
            <input type="number" x-model.number="form.testLoadCount" placeholder="Items to load" min="1">
            <button @click="testLoad">Load Items</button>
          </div>
          <hr>
          <button class="secondary" @click="clearAll">Clear All</button>
        </article>
      </template>
    </div>
  </main>
</body>

</html>
